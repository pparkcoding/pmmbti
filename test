<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PM Type Finder â€“ Prototype (No-CDN)</title>
  <meta name="description" content="PM ìœ í˜•ë³„ MBTI ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸ (8ê°€ì§€ ìœ í˜•) â€“ ì‚¬ìš©ì/ë¹„ì¦ˆë‹ˆìŠ¤, ë°ì´í„°/ì§ê´€, í”Œë˜ë„ˆ/ë¹Œë” 3ì¶•ìœ¼ë¡œ ì§„ë‹¨" />
  <meta name="theme-color" content="#0b1220" />
  <style>
    :root{
      --bg:#0b1220; --fg:#e5e7eb; --muted:#94a3b8; --glass:rgba(255,255,255,.06); --line:rgba(255,255,255,.08);
      --primary:#38bdf8; --accent:#34d399; --ink:#0b1220;
    }
    html,body{height:100%;}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Arial, Apple Color Emoji, Segoe UI Emoji;}
    .container{max-width:960px;margin:0 auto;padding:24px;}
    .row{display:flex;gap:12px;align-items:center;justify-content:space-between;}
    .muted{color:var(--muted);} .small{font-size:12px;} .xsmall{font-size:11px;}
    .title{font-weight:800;letter-spacing:.2px;font-size:28px;margin:0 0 6px;}
    .btn{border:none;border-radius:9999px;padding:10px 16px;font-weight:700;cursor:pointer;transition:.2s;}
    .btn-primary{background:var(--primary);color:#000;} .btn-primary:hover{filter:brightness(1.1)}
    .btn-ghost{background:rgba(255,255,255,.1);color:var(--fg);} .btn-ghost:hover{background:rgba(255,255,255,.18)}
    .card{background:var(--glass);border:1px solid var(--line);border-radius:16px;padding:16px;}
    .grid{display:grid;gap:12px;} .g2{grid-template-columns:repeat(2,minmax(0,1fr));}
    @media (max-width:780px){.g2{grid-template-columns:1fr;}}
    .pill{border-radius:9999px}
    .progress{height:8px;background:rgba(255,255,255,.08);border-radius:9999px;overflow:hidden}
    .bar{height:100%;width:0;background:var(--primary);transition:width .25s ease}
    .qcard{padding:16px;border-radius:16px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10)}
    .qhead{display:flex;gap:10px}
    .qidx{color:var(--muted);font-size:12px;min-width:40px}
    .range{width:100%}
    /* custom slider */
    input[type=range]{-webkit-appearance:none;appearance:none;width:100%;background:transparent}
    input[type=range]::-webkit-slider-runnable-track{height:6px;background:rgba(255,255,255,.15);border-radius:9999px}
    input[type=range]::-moz-range-track{height:6px;background:rgba(255,255,255,.15);border-radius:9999px}
    input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;margin-top:-6px;width:18px;height:18px;border-radius:50%;background:#fff;border:2px solid var(--ink)}
    input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#fff;border:2px solid var(--ink)}
    .barrow{display:flex;justify-content:space-between;font-size:12px;color:var(--muted)}
    .meter{height:12px;background:rgba(255,255,255,.1);border-radius:10px;overflow:hidden}
    .meter>div{height:100%;background:var(--primary);}
    .list{margin:0;padding-left:18px}
    .list li{margin:.2rem 0}
    .tag{display:inline-block;padding:4px 10px;border-radius:9999px;background:#0ea5e91a;border:1px solid #0ea5e933;color:#7dd3fc;font-weight:700}
    .spacer{height:8px}
  </style>
</head>
<body>
  <header class="container">
    <div class="row">
      <div>
        <h1 class="title">PM Type Finder <span style="color:var(--primary)">(Prototype)</span></h1>
        <p class="muted">3ê°€ì§€ ì¶•(ì‚¬ìš©ìâ†”ë¹„ì¦ˆë‹ˆìŠ¤ / ë°ì´í„°â†”ì§ê´€ / í”Œë˜ë„ˆâ†”ë¹Œë”)ìœ¼ë¡œ ì§„ë‹¨í•˜ê³  ì¡°í•©ìœ¼ë¡œ 8ê°€ì§€ ìœ í˜•ì„ íŒë³„í•©ë‹ˆë‹¤.</p>
      </div>
      <a href="#test" class="btn btn-primary">í…ŒìŠ¤íŠ¸ ì‹œì‘</a>
    </div>
    <div class="spacer"></div>
    <div class="grid g2">
      <div class="card"><div class="small muted">ì¶• #1</div><div>ì‚¬ìš©ì(User) â†” ë¹„ì¦ˆë‹ˆìŠ¤(Biz)</div></div>
      <div class="card"><div class="small muted">ì¶• #2</div><div>ë°ì´í„°(Data) â†” ì§ê´€(Intuition)</div></div>
      <div class="card"><div class="small muted">ì¶• #3</div><div>í”Œë˜ë„ˆ(Planner) â†” ë¹Œë”(Builder)</div></div>
    </div>
  </header>

  <main id="test" class="container">
    <!-- Progress -->
    <div>
      <div class="row" style="margin-bottom:6px">
        <div class="small muted">ì™„ë£Œìœ¨</div>
        <div class="small muted"><span id="progressCount">0</span>/15</div>
      </div>
      <div class="progress"><div id="progressBar" class="bar"></div></div>
    </div>

    <!-- Questions -->
    <div id="quizForm" class="grid" style="margin-top:14px"></div>

    <!-- Actions -->
    <div class="row" style="gap:8px;margin-top:14px;flex-wrap:wrap">
      <button id="submitBtn" type="button" class="btn btn-primary">ê²°ê³¼ ë³´ê¸°</button>
      <button id="resetBtn" type="button" class="btn btn-ghost">ì´ˆê¸°í™”</button>
    </div>

    <!-- Result -->
    <section id="resultSection" style="display:none;margin-top:22px" class="grid g2">
      <div class="card">
        <div class="row" style="align-items:flex-start">
          <div>
            <h2 id="typeTitle" style="margin:0 0 4px;font-size:24px;font-weight:800"></h2>
            <div id="typeCode" class="small muted"></div>
            <p id="typeTagline" style="margin:10px 0 0"></p>
          </div>
          <div style="text-align:right">
            <div class="xsmall muted">ê³µìœ </div>
            <div style="display:flex;gap:8px;margin-top:6px;flex-wrap:wrap;justify-content:flex-end">
              <button id="shareBtn" class="btn btn-ghost xsmall">ì›¹ ê³µìœ </button>
              <button id="copyBtn" class="btn btn-ghost xsmall">ë³µì‚¬</button>
              <button id="printBtn" class="btn btn-ghost xsmall">PDF</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="small muted" style="margin-bottom:6px">ë‚˜ì˜ í”„ë¡œí•„</div>
        <div id="profileBars" class="grid"></div>
        <canvas id="radar" width="480" height="360" style="margin-top:12px;width:100%;height:auto"></canvas>
      </div>

      <div class="card">
        <div class="small muted" style="margin-bottom:6px">ê°•ì  Â· ë¦¬ìŠ¤í¬ Â· í˜‘ì—… íŒ</div>
        <div id="traitLists" class="grid"></div>
      </div>

      <div class="card">
        <div class="small muted">ë³´ì™„ íŒŒíŠ¸ë„ˆ ì¶”ì²œ</div>
        <p id="partnerTip" class="muted" style="margin-top:6px"></p>
      </div>
    </section>
  </main>

  <footer class="container muted small" style="padding-bottom:40px">Â© 2025 PM Type Finder â€“ Prototype</footer>

  <script>
    // ====== Model ======
    const AXES = {
      F: { anchor: 'U', labelPos: 'User', labelNeg: 'Biz', long: 'ì‚¬ìš©ìâ†”ë¹„ì¦ˆë‹ˆìŠ¤' },
      D: { anchor: 'D', labelPos: 'Data', labelNeg: 'Intuition', long: 'ë°ì´í„°â†”ì§ê´€' },
      E: { anchor: 'P', labelPos: 'Planner', labelNeg: 'Builder', long: 'í”Œë˜ë„ˆâ†”ë¹Œë”' },
    };

    const QUESTIONS = [
      { id: 1, axis: 'F', polePositive: 'U', text: 'ê¸°ëŠ¥ ìš°ì„ ìˆœìœ„ì—ì„œ ì‚¬ìš©ì í˜ì¸í¬ì¸íŠ¸ê°€ ë§¤ì¶œ ì„íŒ©íŠ¸ë³´ë‹¤ ë” ì¤‘ìš”í•˜ë‹¤.' },
      { id: 2, axis: 'F', polePositive: 'B', text: 'ë‹¨ê¸° ìˆ˜ìµì„±ì´ ë‚®ìœ¼ë©´ ì‚¬ìš©ì ë§Œì¡±ë„ê°€ ë†’ì•„ë„ ì¶œì‹œë¥¼ ë¯¸ë£¬ë‹¤.' },
      { id: 3, axis: 'F', polePositive: 'B', text: 'NPSê°€ ì†Œí­ í•˜ë½í•˜ë”ë¼ë„ ARPUê°€ ì˜¤ë¥´ë©´ ìˆ˜ìš© ê°€ëŠ¥í•˜ë‹¤.' },
      { id: 4, axis: 'F', polePositive: 'U', text: 'PRD ì‘ì„± ì‹œ "ì‚¬ìš©ì ìŠ¤í† ë¦¬"ë¥¼ ê°€ì¥ ë¨¼ì € ì •ë¦¬í•œë‹¤.' },
      { id: 5, axis: 'F', polePositive: 'B', text: 'í•µì‹¬ KPIëŠ” ì „í™˜ìœ¨/ë§¤ì¶œ ì§€í‘œê°€ UX ì§€í‘œë³´ë‹¤ ë” ìš°ì„ ì´ë‹¤.' },
      { id: 6, axis: 'D', polePositive: 'D', text: 'ì˜ì‚¬ê²°ì • ì „ì— ìµœì†Œ ìƒ˜í”Œí¬ê¸°/ìœ ì˜ìˆ˜ì¤€ ë“±ì„ í™•ì¸í•œë‹¤.' },
      { id: 7, axis: 'D', polePositive: 'I', text: 'ê²½ìŸì‚¬ ì„±ê³µì‚¬ë¡€ë‚˜ íŒ€ì˜ ê°ì´ ë°ì´í„°ë³´ë‹¤ ë¹ ë¥´ê²Œ ë°©í–¥ì„ ì¡ì•„ì¤€ë‹¤.' },
      { id: 8, axis: 'D', polePositive: 'D', text: 'A/B í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ëª¨í˜¸í•˜ë©´ ë” ë§ì€ ë°ì´í„°ë¥¼ ëª¨ì„ ë•Œê¹Œì§€ ë³´ë¥˜í•œë‹¤.' },
      { id: 9, axis: 'D', polePositive: 'I', text: 'ìˆ«ìê°€ ì• ë§¤í•  ë•ŒëŠ” ë¦¬ë”ì˜ ë¹„ì „ì´ ëª…í™•í•˜ë©´ ë°€ì–´ë¶™ì¸ë‹¤.' },
      { id:10, axis: 'D', polePositive: 'D', text: 'ëŒ€ì‹œë³´ë“œê°€ ì—†ëŠ” ì˜ì—­ì—ì„œëŠ” ì¼ì„ ì‹œì‘í•˜ê¸° ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.' },
      { id:11, axis: 'E', polePositive: 'P', text: 'ë¦´ë¦¬ì¦ˆ ì „ì— ì—£ì§€ ì¼€ì´ìŠ¤ë¥¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ê¼¼ê¼¼íˆ ì ê²€í•œë‹¤.' },
      { id:12, axis: 'E', polePositive: 'B', text: 'ì™„ë²½í•˜ì§„ ì•Šì•„ë„ 1ì£¼ ë‚´ í”„ë¡œí† íƒ€ì…ì„ ë§Œë“¤ì–´ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤€ë‹¤.' },
      { id:13, axis: 'E', polePositive: 'P', text: 'ë¡œë“œë§µì€ ë¶„ê¸° ë‹¨ìœ„ë¡œ í™•ì •í•´ ë‘ëŠ” í¸ì´ë‹¤.' },
      { id:14, axis: 'E', polePositive: 'B', text: 'íŒ€ì´ ë§‰íˆë©´ ì§ì ‘ íˆ´/ì¿¼ë¦¬/ë””ìì¸ì„ ì†ëŒ€ì„œë¼ë„ ëŒíŒŒí•œë‹¤.' },
      { id:15, axis: 'E', polePositive: 'P', text: 'í”„ë¡œì„¸ìŠ¤ ë¬¸ì„œí™”ê°€ ë¹ ë¥¸ ì‹¤í—˜ë³´ë‹¤ ë” ì¤‘ìš”í•˜ë‹¤.' },
    ];

    const TYPE_MAP = {
      'U-D-P': { name: 'UX ì•„í‚¤í…íŠ¸ ğŸ§­', tagline: 'ë°ì´í„°ë¡œ ì‚¬ìš©ì ë¬¸ì œë¥¼ ì„¤ê³„í•˜ê³ , í”„ë¡œì„¸ìŠ¤ë¡œ ì•ˆì •ì ìœ¼ë¡œ ë”œë¦¬ë²„ë¦¬', strengths: ['ì‚¬ìš©ì í˜ì¸í¬ì¸íŠ¸ ì •ë°€ ì •ì˜','ì§€í‘œ ê¸°ë°˜ ìš°ì„ ìˆœìœ„','í’ˆì§ˆÂ·ë¦¬ìŠ¤í¬ ê´€ë¦¬ ìš°ìˆ˜'], risks: ['ì†ë„ ì €í•˜(ë¶„ì„ ê³¼ì‰)','ì‹¤í—˜ ë¹„ìš© ì¦ê°€','í˜ì‹ ë³´ë‹¤ëŠ” ì•ˆì • ì¹˜ìš°ì¹¨'], tips: ['ê°€ë²¼ìš´ ì‹¤í—˜ ìŠ¬ë¡¯ ìœ ì§€','í•µì‹¬ KPI 3ê°œ ì´í•˜','í”„ë¡œí† íƒ€ì… ì£¼ê¸° ê³ ì •(ì›”1)'] },
      'U-D-B': { name: 'ê·¸ë¡œìŠ¤ ë©”ì´ì»¤ ğŸ”§ğŸ“Š', tagline: 'ìœ ì € ì§‘ì°© + ë°ì´í„° ì‹¤í—˜ìœ¼ë¡œ ê°€ì„¤ì„ ë¹ ë¥´ê²Œ ê²€ì¦', strengths: ['ë¹ ë¥¸ ê°€ì„¤â†’ì‹¤í—˜â†’í•™ìŠµ ë£¨í”„','ì˜¨ë³´ë”©/ì „í™˜ ìµœì í™”','ì •ëŸ‰ ê·¼ê±°ë¡œ ì„¤ë“ë ¥'], risks: ['ì¥ê¸° ë¡œë“œë§µ ë¶€ì¬','ë¸Œëœë“œ/ì¼ê´€ì„± í¬ì„','ê¸°ìˆ ë¶€ì±„ ëˆ„ì '], tips: ['ë¶„ê¸° ë¦¬íŒ©í„°ë§ ìŠ¤í”„ë¦°íŠ¸','ë¶ê·¹ì„± ì§€í‘œ ëª…í™•í™”','ì‹¤í—˜ ì•„ì¹´ì´ë¸Œ êµ¬ì¶•'] },
      'U-I-P': { name: 'ì‚¬ìš©ì íë ˆì´í„° ğŸ¨', tagline: 'ì§ê´€ìœ¼ë¡œ í˜ì¸í¬ì¸íŠ¸ í¬ì°©, í”„ë¡œì„¸ìŠ¤ë¡œ í’ˆì§ˆ ë‹´ë³´', strengths: ['ì •ì„± ì¸ì‚¬ì´íŠ¸ ê°•ì ','ì„œë² ì´/ì¸í„°ë·° ìš´ì˜','ëŸ°ì¹­ í’ˆì§ˆ ì•ˆì •'], risks: ['ê³¼í•™ì  ê²€ì¦ ë¶€ì¡±','ìŠ¤ì¼€ì¼ë§ ì†ë„ ì €í•˜','ì„¤ë“ ë‚œì´ë„'], tips: ['ì •ëŸ‰ ê°€ì„¤ í”„ë ˆì´ë°','PMF ì´í›„ ìŠ¤ì¼€ì¼ ì§€í‘œ','ê°€ë²¼ìš´ A/B ë¬¸í™”'] },
      'U-I-B': { name: 'í”„ë¡œí† íƒ€ì… ë©”ì´ì»¤ ğŸ› ï¸', tagline: 'ìœ ì €ì— ì§‘ì°©í•˜ë©° ì‹œì œí’ˆì„ ë¹ ë¥´ê²Œ ë§Œë“¤ê³  ê²€ì¦', strengths: ['ì‹œì¥/ìœ ì € ë°˜ì‘ í¬ì°©','ì†ë„Â·íƒìƒ‰ ê°•ì ','ì°½ì˜ì  ì†”ë£¨ì…˜'], risks: ['ë°ì´í„°/ì•ˆì •ì„± ë¶€ì¡±','í•™ìŠµ ê¸°ë¡ ë¶€ì¬','ì¡°ì§ ë™ê¸°í™” ì–´ë ¤ì›€'], tips: ['ì‹¤í—˜ ê¸°ë¡ í‘œì¤€í™”','ì£¼ê°„ íšŒê³ Â·ëŸ¬ë‹ ì‰ì–´','MVP í›„ í’ˆì§ˆ ê²Œì´íŠ¸'] },
      'B-D-P': { name: 'ROI ì „ëµê°€ ğŸ“ˆ', tagline: 'ìˆ˜ìµ/íš¨ìœ¨ì„ ì„¤ê³„í•´ ê³„íšì ìœ¼ë¡œ ì‹¤í–‰', strengths: ['ë¹„ì¦ˆ ì„íŒ©íŠ¸ ì„ ëª…','ì˜ˆì¸¡/ì˜ˆì‚° ì •í•©','ë¦¬ìŠ¤í¬ í†µì œ'], risks: ['ìœ ì € ê°ë™ ë¯¸ìŠ¤','ë³´ìˆ˜ì  ì˜ì‚¬ê²°ì •','íƒìƒ‰ ë¶€ì±„'], tips: ['ì •ì„± ì¸í„°ë·° ë™í–‰','íƒìƒ‰ ì˜ˆì‚° 10~15%','NPSÂ·CES ë³´ì¡° KPI'] },
      'B-D-B': { name: 'ê·¸ë¡œìŠ¤ ì˜¤í¼ë ˆì´í„° âš¡', tagline: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì„íŒ©íŠ¸ë¥¼ ìœ„í•´ ì‹¤í—˜ê³¼ ìë™í™”ë¥¼ ê³¼ê°íˆ ì§‘í–‰', strengths: ['ë§¤ì¶œ/ì „í™˜ ê°œì„ ','í¼ë„ íŒŒì´í”„ë¼ì¸ ìš´ì˜','ìë™í™”Â·íˆ´ë§ ì„ í˜¸'], risks: ['ë‹¨ê¸° ìµœì í™” í¸í–¥','ê³ ê° ê²½í—˜ í¬ì„','ë¸Œëœë“œ ë¦¬ìŠ¤í¬'], tips: ['ê³ ê° ìŠ¤í† ë¦¬ ì›”1 ë°œí‘œ','ê²½í—˜ì§€í‘œ(ë°˜ë³µì‚¬ìš©ë¥ ) ë„ì…','ë¸Œëœë“œ ê°€ì´ë“œ ì²´í¬'] },
      'B-I-P': { name: 'ë¹„ì „ í”Œë˜ë„ˆ ğŸŒ‰', tagline: 'í° ê·¸ë¦¼ê³¼ ìŠ¤í† ë¦¬ë¡œ ì¡°ì§ì„ ë¬¶ê³ , ì°©ì‹¤íˆ ì „ê°œ', strengths: ['ë‚´ëŸ¬í‹°ë¸ŒÂ·ì •ë ¬ ê°•ì ','ë¡œë“œë§µ ê±°ë²„ë„ŒìŠ¤','ìŠ¤í…Œì´í¬í™€ë” ê´€ë¦¬'], risks: ['ê²€ì¦ ì§€ì—°','í˜„ì¥ ì‹ í˜¸ ë‘”ê°','ì†ë„ ì €í•˜'], tips: ['ì´ˆê¸° ì§€í‘œ ê°€ë“œë ˆì¼','íƒìƒ‰ ìŠ¤í”„ë¦°íŠ¸ ì˜ë¬´í™”','í˜„ì¥ ë™í–‰Â·ì‚¬ìš©ì„± í…ŒìŠ¤íŠ¸'] },
      'B-I-B': { name: 'ë¹„ì „ ë“œë¼ì´ë²„ ğŸš€', tagline: 'ì‹œì¥ì˜ íƒ€ì´ë°ì„ ì½ê³  ìš°ì§í•˜ê²Œ ëŒíŒŒ', strengths: ['ê²°ë‹¨ë ¥Â·ìŠ¤í”¼ë“œ','í•˜ì´ë ˆë²¨ ë°©í–¥ì„±','ì œë¡œâ†’ì› ì¶”ì§„'], risks: ['ê·¼ê±° ë¹ˆì•½/ë¦¬ìŠ¤í¬ ì¦í­','íŒ€ ë²ˆì•„ì›ƒ','ì¬ì‘ì—… ì¦ê°€'], tips: ['ë°ì´í„° íŒŒíŠ¸ë„ˆ í˜ì–´ë§','ìŠ¤ì½”í”„ ìŠ¬ë¼ì´ì‹±','ì£¼ê°„ ë¦¬ìŠ¤í¬ ë¦¬ë·°'] },
    };

    // ====== Render Questions ======
    const formEl = document.getElementById('quizForm');
    function renderQuestions(){
      const frag = document.createDocumentFragment();
      QUESTIONS.forEach((q, idx)=>{
        const wrap = document.createElement('div');
        wrap.className = 'qcard';
        wrap.innerHTML = `
          <div class="qhead">
            <div class="qidx">Q${idx+1}</div>
            <div style="flex:1">
              <div style="font-weight:600">${q.text}</div>
              <div style="margin-top:8px">
                <input class="range" type="range" min="1" max="5" step="1" value="3" name="q_${q.id}" data-qid="${q.id}">
                <div class="barrow"><span>ê°•í•˜ê²Œ ë°˜ëŒ€</span><span>ì¤‘ë¦½</span><span>ê°•í•˜ê²Œ ë™ì˜</span></div>
              </div>
              <div class="xsmall muted" style="margin-top:6px">ì¶•: ${AXES[q.axis].long}</div>
            </div>
          </div>`;
        frag.appendChild(wrap);
      });
      formEl.appendChild(frag);
    }

    // ====== Progress ======
    const progressCountEl = document.getElementById('progressCount');
    const progressBarEl = document.getElementById('progressBar');
    function updateProgress(){
      const values = getAnswers();
      const answered = values.filter(v=>v!==null).length;
      progressCountEl.textContent = answered.toString();
      const pct = Math.round((answered/QUESTIONS.length)*100);
      progressBarEl.style.width = pct+'%';
    }

    // ====== Answers ======
    function getAnswers(){
      return QUESTIONS.map(q=>{
        const el = formEl.querySelector(`[name="q_${q.id}"]`);
        if(!el) return null; const v = parseInt(el.value,10); return isNaN(v)?null:v;
      });
    }
    function likertToScore(v){ return v-3; } // -2..+2

    function computeScores(){
      const answers = getAnswers();
      if(answers.some(v=>v===null)) return { ok:false, reason:'ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ì£¼ì„¸ìš”.' };
      const agg={F:0,D:0,E:0}, counts={F:0,D:0,E:0};
      QUESTIONS.forEach((q,i)=>{
        const raw = answers[i]; const m = likertToScore(raw);
        const dir = (q.polePositive===AXES[q.axis].anchor)?1:-1;
        agg[q.axis]+= dir*m; counts[q.axis]+=1;
      });
      const Fpole = agg.F>=0?'U':'B'; const Dpole = agg.D>=0?'D':'I'; const Epole = agg.E>=0?'P':'B';
      function toPercent(axis){ const max=2*counts[axis]; const normalized=(agg[axis]+max)/(2*max); return Math.round(normalized*100); }
      const pct={F:toPercent('F'),D:toPercent('D'),E:toPercent('E')};
      const code=`${Fpole}-${Dpole}-${Epole}`; return {ok:true, agg, counts, pct, code, Fpole, Dpole, Epole};
    }

    // ====== Result UI ======
    const resultSection = document.getElementById('resultSection');
    const typeTitle = document.getElementById('typeTitle');
    const typeCode = document.getElementById('typeCode');
    const typeTagline = document.getElementById('typeTagline');
    const traitLists = document.getElementById('traitLists');
    const profileBars = document.getElementById('profileBars');
    const radarCanvas = document.getElementById('radar');

    function barHTML(axisKey, valueAnchorPct){
      const leftLabel = AXES[axisKey].labelPos; const rightLabel = AXES[axisKey].labelNeg;
      const leftPct = valueAnchorPct; const rightPct = 100-leftPct;
      return `
        <div>
          <div class="barrow"><span>${leftLabel}</span><span>${rightLabel}</span></div>
          <div class="meter" style="margin-top:4px"><div style="width:${leftPct}%"></div></div>
          <div class="barrow" style="margin-top:4px"><span>${leftPct}%</span><span>${rightPct}%</span></div>
        </div>`;
    }

    function renderRadar(values){
      const ctx = radarCanvas.getContext('2d');
      const w = radarCanvas.width, h = radarCanvas.height; ctx.clearRect(0,0,w,h);
      const cx = w/2, cy = h/2 + 10; const R = Math.min(w,h)*0.35; const N=3; const step=0.2;

      // grid
      ctx.strokeStyle='rgba(255,255,255,.18)'; ctx.lineWidth=1;
      for(let t=step;t<=1.0001;t+=step){
        ctx.beginPath();
        for(let i=0;i<N;i++){
          const ang = -Math.PI/2 + i*(2*Math.PI/N);
          const x = cx + Math.cos(ang)*R*t; const y = cy + Math.sin(ang)*R*t;
          if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
        }
        ctx.closePath(); ctx.stroke();
      }
      // axes
      ctx.strokeStyle='rgba(255,255,255,.25)';
      for(let i=0;i<N;i++){
        const ang = -Math.PI/2 + i*(2*Math.PI/N);
        ctx.beginPath(); ctx.moveTo(cx,cy); ctx.lineTo(cx+Math.cos(ang)*R, cy+Math.sin(ang)*R); ctx.stroke();
      }
      // polygon
      const pts=[]; const vals = values.map(v=>Math.max(0,Math.min(100,v))/100);
      for(let i=0;i<N;i++){
        const ang = -Math.PI/2 + i*(2*Math.PI/N);
        const r = R*vals[i]; pts.push({x:cx+Math.cos(ang)*r, y:cy+Math.sin(ang)*r});
      }
      ctx.beginPath(); pts.forEach((p,i)=> i?ctx.lineTo(p.x,p.y):ctx.moveTo(p.x,p.y)); ctx.closePath();
      ctx.fillStyle='rgba(56,189,248,.25)'; ctx.strokeStyle='rgba(56,189,248,.9)'; ctx.lineWidth=2; ctx.fill(); ctx.stroke();

      // labels
      const labels=['User','Data','Planner']; ctx.fillStyle='rgba(203,213,225,1)'; ctx.font='12px system-ui';
      for(let i=0;i<N;i++){
        const ang = -Math.PI/2 + i*(2*Math.PI/N); const lx=cx+Math.cos(ang)*(R+16), ly=cy+Math.sin(ang)*(R+16);
        const text = labels[i]; const tw = ctx.measureText(text).width;
        ctx.fillText(text, lx - tw/2, ly+4);
      }
    }

    function renderResult(model){
      const type = TYPE_MAP[model.code] || { name:'í•˜ì´ë¸Œë¦¬ë“œ PM ğŸŒ—', tagline:'ì¶• ê°„ ê· í˜•ì´ ì¢‹ì€ ì œë„ˆëŸ´ë¦¬ìŠ¤íŠ¸', strengths:['ë‹¤ì–‘í•œ ê´€ì  í†µí•©','ìƒí™© ì ì‘ë ¥','í˜‘ì—… ì¹œí™”'], risks:['ê²°ì • ì§€ì—°','ì „ë¬¸í™” ë¶€ì¡±','ìš°ì„ ìˆœìœ„ ëª¨í˜¸'], tips:['í•µì‹¬ ì—­ëŸ‰ 1ê°€ì§€ ì‹¬í™”','ê²°ì • ê¸°í•œ ëª…ì‹œ','ì§€í‘œÂ·ë‚´ëŸ¬í‹°ë¸Œ ê· í˜•'] };
      typeTitle.textContent = type.name;
      typeCode.textContent = `ìœ í˜• ì½”ë“œ: ${model.code} Â· (User/Biz, Data/Intuition, Planner/Builder)`;
      typeTagline.textContent = type.tagline;

      profileBars.innerHTML = [
        barHTML('F', model.pct.F),
        barHTML('D', model.pct.D),
        barHTML('E', model.pct.E),
      ].join('');
      renderRadar([model.pct.F, model.pct.D, model.pct.E]);

      traitLists.innerHTML = `
        <div>
          <div class="muted" style="font-weight:600;margin-bottom:4px">ê°•ì </div>
          <ul class="list">${type.strengths.map(x=>`<li>${x}</li>`).join('')}</ul>
        </div>
        <div>
          <div class="muted" style="font-weight:600;margin-bottom:4px">ë¦¬ìŠ¤í¬</div>
          <ul class="list">${type.risks.map(x=>`<li>${x}</li>`).join('')}</ul>
        </div>
        <div>
          <div class="muted" style="font-weight:600;margin-bottom:4px">í˜‘ì—… íŒ</div>
          <ul class="list">${type.tips.map(x=>`<li>${x}</li>`).join('')}</ul>
        </div>`;

      const deltas=[{k:'F',v:Math.abs(model.pct.F-50)},{k:'D',v:Math.abs(model.pct.D-50)},{k:'E',v:Math.abs(model.pct.E-50)}].sort((a,b)=>a.v-b.v);
      const weak = deltas[0].k; const axisName = AXES[weak].long; const pole = weak==='F'?model.Fpole:weak==='D'?model.Dpole:model.Epole;
      const opp = (weak==='F'&&pole==='U')?'Biz':(weak==='F'&&pole==='B')?'User':(weak==='D'&&pole==='D')?'Intuition':(weak==='D'&&pole==='I')?'Data':(weak==='E'&&pole==='P')?'Builder':'Planner';
      document.getElementById('partnerTip').textContent = `í˜„ì¬ ${axisName} ì¶•ì—ì„œ ê· í˜•í˜•ì…ë‹ˆë‹¤. ${opp} ê°•ì ì„ ê°€ì§„ ë™ë£Œì™€ í˜ì–´ë§í•˜ë©´ ì‹œë„ˆì§€ê°€ í½ë‹ˆë‹¤.`;

      resultSection.style.display='grid';
      resultSection.scrollIntoView({behavior:'smooth',block:'start'});
    }

    // ====== Share / Copy / Print ======
    const shareBtn = document.getElementById('shareBtn');
    const copyBtn = document.getElementById('copyBtn');
    const printBtn = document.getElementById('printBtn');

    function currentSharePayload(){
      const t = typeTitle.textContent || 'PM Type Finder';
      const code = typeCode.textContent || '';
      const tag = typeTagline.textContent || '';
      const f = document.querySelector('#profileBars > div:nth-child(1) .barrow span:first-child')?.textContent || 'User';
      const d = document.querySelector('#profileBars > div:nth-child(2) .barrow span:first-child')?.textContent || 'Data';
      const p = document.querySelector('#profileBars > div:nth-child(3) .barrow span:first-child')?.textContent || 'Planner';
      return { title: t, text: `${code}
${tag}
${f} / ${d} / ${p}` };
    }

    shareBtn.addEventListener('click', async (e)=>{
      e.preventDefault(); const {text,title}=currentSharePayload();
      if(navigator.share){ try{ await navigator.share({title, text, url: location.href}); }catch(_){} }
      else{ try{ await navigator.clipboard.writeText(`${title}

${text}
${location.href}`); shareBtn.textContent='ë³µì‚¬ ì™„ë£Œ âœ…'; setTimeout(()=>shareBtn.textContent='ì›¹ ê³µìœ ',1200); }catch(_){}}
    });
    copyBtn.addEventListener('click', async (e)=>{
      e.preventDefault(); const {text,title}=currentSharePayload();
      try{ await navigator.clipboard.writeText(`${title}

${text}`); copyBtn.textContent='ë³µì‚¬ ì™„ë£Œ âœ…'; setTimeout(()=>copyBtn.textContent='ë³µì‚¬',1200);}catch(_){}}
    );
    printBtn.addEventListener('click', (e)=>{ e.preventDefault(); window.print(); });

    // ====== Events ======
    document.getElementById('submitBtn').addEventListener('click', ()=>{ const res=computeScores(); if(!res.ok){alert(res.reason);return;} renderResult(res); });
    document.getElementById('resetBtn').addEventListener('click', ()=>{ formEl.querySelectorAll('input[type="range"]').forEach(el=>el.value=3); resultSection.style.display='none'; updateProgress(); window.scrollTo({top:0,behavior:'smooth'}); });
    formEl.addEventListener('input', (e)=>{ if(e.target && e.target.matches('input[type="range"]')) updateProgress(); });

    // ====== Init ======
    renderQuestions(); updateProgress();
  </script>
</body>
</html>
